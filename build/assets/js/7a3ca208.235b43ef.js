"use strict";(globalThis.webpackChunkphysical_ai_humanoid_robotics_book=globalThis.webpackChunkphysical_ai_humanoid_robotics_book||[]).push([[44],{953:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>l,contentTitle:()=>s,default:()=>u,frontMatter:()=>a,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"module-2-digital-twin/unity-scene-setup","title":"Unity Scene Setup and Physics Configuration","description":"Unity provides a powerful environment for creating high-fidelity digital twins with advanced graphics and physics capabilities. This section covers setting up Unity scenes for humanoid robotics simulation with proper physics configuration.","source":"@site/docs/module-2-digital-twin/unity-scene-setup.md","sourceDirName":"module-2-digital-twin","slug":"/module-2-digital-twin/unity-scene-setup","permalink":"/Physical-AI-Humanoid-Robotics-Book/docs/module-2-digital-twin/unity-scene-setup","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Sensor Simulation","permalink":"/Physical-AI-Humanoid-Robotics-Book/docs/module-2-digital-twin/sensor-simulation"},"next":{"title":"Unity Visualization","permalink":"/Physical-AI-Humanoid-Robotics-Book/docs/module-2-digital-twin/unity-visualization"}}');var t=i(4848),r=i(8453);const a={},s="Unity Scene Setup and Physics Configuration",l={},c=[{value:"Unity Project Setup for Robotics",id:"unity-project-setup-for-robotics",level:2},{value:"Initial Project Configuration",id:"initial-project-configuration",level:3},{value:"Required Packages",id:"required-packages",level:3},{value:"Project Settings Configuration",id:"project-settings-configuration",level:3},{value:"Scene Architecture",id:"scene-architecture",level:2},{value:"Basic Scene Structure",id:"basic-scene-structure",level:3},{value:"Environment Setup",id:"environment-setup",level:3},{value:"Ground Plane",id:"ground-plane",level:4},{value:"Lighting Configuration",id:"lighting-configuration",level:4},{value:"Physics Configuration",id:"physics-configuration",level:2},{value:"Physics Manager Settings",id:"physics-manager-settings",level:3},{value:"Custom Physics Material",id:"custom-physics-material",level:3},{value:"Robot Integration",id:"robot-integration",level:2},{value:"Robot Prefab Structure",id:"robot-prefab-structure",level:3},{value:"Sensor Integration",id:"sensor-integration",level:3},{value:"Scene Management",id:"scene-management",level:2},{value:"Scene Controller",id:"scene-controller",level:3},{value:"Performance Optimization",id:"performance-optimization",level:2},{value:"Physics Optimization",id:"physics-optimization",level:3},{value:"Level of Detail (LOD) for Complex Robots",id:"level-of-detail-lod-for-complex-robots",level:3},{value:"Debugging and Visualization",id:"debugging-and-visualization",level:2},{value:"Physics Debugging Tools",id:"physics-debugging-tools",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Consistent Units",id:"1-consistent-units",level:3},{value:"2. Modularity",id:"2-modularity",level:3},{value:"3. Error Handling",id:"3-error-handling",level:3},{value:"Exercise",id:"exercise",level:2}];function d(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"unity-scene-setup-and-physics-configuration",children:"Unity Scene Setup and Physics Configuration"})}),"\n",(0,t.jsx)(e.p,{children:"Unity provides a powerful environment for creating high-fidelity digital twins with advanced graphics and physics capabilities. This section covers setting up Unity scenes for humanoid robotics simulation with proper physics configuration."}),"\n",(0,t.jsx)(e.h2,{id:"unity-project-setup-for-robotics",children:"Unity Project Setup for Robotics"}),"\n",(0,t.jsx)(e.h3,{id:"initial-project-configuration",children:"Initial Project Configuration"}),"\n",(0,t.jsx)(e.p,{children:"When creating a Unity project for robotics applications:"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Project Template"}),": Start with 3D template"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Target Platform"}),": Consider your deployment needs (PC, VR, mobile)"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Scripting Runtime"}),": Use .NET Standard 2.1 or higher"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"API Compatibility"}),": .NET Framework for Windows applications"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"required-packages",children:"Required Packages"}),"\n",(0,t.jsx)(e.p,{children:"Install these packages via the Unity Package Manager (Window \u2192 Package Manager):"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:"// Key packages for robotics simulation\n- com.unity.robotics.ros-tcp-connector: ROS communication\n- com.unity.robotics.urdf-importer: URDF model import\n- com.unity.perception: Synthetic data generation\n- com.unity.physics: Advanced physics simulation\n- com.unity.xr: If using VR/AR\n"})}),"\n",(0,t.jsx)(e.h3,{id:"project-settings-configuration",children:"Project Settings Configuration"}),"\n",(0,t.jsx)(e.p,{children:"Configure Project Settings for robotics simulation:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:"// Edit \u2192 Project Settings \u2192 Time\n- Fixed Timestep: 0.02 (50 Hz) for physics simulation\n- Maximum Allowed Timestep: 0.333 (30 FPS cap)\n- Maximum Particle Timestep: 0.03\n\n// Edit \u2192 Project Settings \u2192 Physics\n- Gravity: (0, -9.81, 0) for Earth-like gravity\n- Default Material: Create custom material with appropriate friction\n- Bounce Threshold: 2 (velocity threshold for bounce)\n- Contact Offset: 0.01 (contact distance threshold)\n- Solver Iterations: 6 (accuracy vs performance)\n- Solver Velocity Iterations: 1 (velocity accuracy)\n"})}),"\n",(0,t.jsx)(e.h2,{id:"scene-architecture",children:"Scene Architecture"}),"\n",(0,t.jsx)(e.h3,{id:"basic-scene-structure",children:"Basic Scene Structure"}),"\n",(0,t.jsx)(e.p,{children:"Create a well-organized scene hierarchy:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"Scene Root\n\u251c\u2500\u2500 Environment\n\u2502   \u251c\u2500\u2500 Ground\n\u2502   \u251c\u2500\u2500 Walls\n\u2502   \u251c\u2500\u2500 Obstacles\n\u2502   \u2514\u2500\u2500 Lighting\n\u251c\u2500\u2500 Robots\n\u2502   \u251c\u2500\u2500 HumanoidRobot\n\u2502   \u2502   \u251c\u2500\u2500 BaseLink\n\u2502   \u2502   \u251c\u2500\u2500 Links (joints and bodies)\n\u2502   \u2502   \u2514\u2500\u2500 Sensors\n\u2502   \u2514\u2500\u2500 OtherRobots...\n\u251c\u2500\u2500 Controllers\n\u2502   \u251c\u2500\u2500 ROSConnection\n\u2502   \u251c\u2500\u2500 RobotController\n\u2502   \u2514\u2500\u2500 SceneController\n\u2514\u2500\u2500 Managers\n    \u251c\u2500\u2500 PhysicsManager\n    \u251c\u2500\u2500 VisualizationManager\n    \u2514\u2500\u2500 CommunicationManager\n"})}),"\n",(0,t.jsx)(e.h3,{id:"environment-setup",children:"Environment Setup"}),"\n",(0,t.jsx)(e.h4,{id:"ground-plane",children:"Ground Plane"}),"\n",(0,t.jsx)(e.p,{children:"Create a realistic ground plane with proper physics properties:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:'using UnityEngine;\n\npublic class GroundPlaneSetup : MonoBehaviour\n{\n    [Header("Ground Properties")]\n    [SerializeField] private PhysicMaterial groundMaterial;\n    [SerializeField] private float size = 100f;\n    [SerializeField] private float friction = 0.5f;\n    [SerializeField] private float bounciness = 0.1f;\n\n    void Start()\n    {\n        // Create ground plane\n        GameObject ground = GameObject.CreatePrimitive(PrimitiveType.Plane);\n        ground.transform.SetParent(transform);\n        ground.transform.localPosition = Vector3.zero;\n        ground.transform.localScale = Vector3.one * (size / 10f); // Plane is 10 units by default\n\n        // Configure collider\n        var collider = ground.GetComponent<Collider>();\n        if (collider != null)\n        {\n            if (groundMaterial == null)\n            {\n                groundMaterial = new PhysicMaterial("GroundMaterial");\n                groundMaterial.staticFriction = friction;\n                groundMaterial.dynamicFriction = friction;\n                groundMaterial.bounciness = bounciness;\n            }\n            collider.material = groundMaterial;\n        }\n\n        // Add visual material\n        Renderer renderer = ground.GetComponent<Renderer>();\n        if (renderer != null)\n        {\n            renderer.material = CreateGroundMaterial();\n        }\n    }\n\n    Material CreateGroundMaterial()\n    {\n        Material groundMat = new Material(Shader.Find("Standard"));\n        groundMat.color = Color.gray;\n        groundMat.SetFloat("_Metallic", 0.1f);\n        groundMat.SetFloat("_Smoothness", 0.2f);\n        return groundMat;\n    }\n}\n'})}),"\n",(0,t.jsx)(e.h4,{id:"lighting-configuration",children:"Lighting Configuration"}),"\n",(0,t.jsx)(e.p,{children:"Set up realistic lighting for the scene:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:'using UnityEngine;\n\npublic class LightingSetup : MonoBehaviour\n{\n    [Header("Lighting Configuration")]\n    [SerializeField] private LightType lightType = LightType.Directional;\n    [SerializeField] private Color lightColor = Color.white;\n    [SerializeField] private float intensity = 1.0f;\n    [SerializeField] private Vector3 lightDirection = new Vector3(-0.5f, -1f, -0.5f);\n\n    void Start()\n    {\n        // Create main light\n        GameObject lightObj = new GameObject("Main Light");\n        lightObj.transform.SetParent(transform);\n        lightObj.transform.position = new Vector3(0, 10, 0);\n\n        Light light = lightObj.AddComponent<Light>();\n        light.type = lightType;\n        light.color = lightColor;\n        light.intensity = intensity;\n        light.transform.rotation = Quaternion.LookRotation(lightDirection);\n\n        // Add ambient lighting\n        RenderSettings.ambientLight = new Color(0.2f, 0.2f, 0.2f, 1f);\n        RenderSettings.ambientMode = UnityEngine.Rendering.AmbientMode.Trilight;\n    }\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"physics-configuration",children:"Physics Configuration"}),"\n",(0,t.jsx)(e.h3,{id:"physics-manager-settings",children:"Physics Manager Settings"}),"\n",(0,t.jsx)(e.p,{children:"Configure the Physics Manager for robotics simulation:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:"// This would be configured through Edit \u2192 Project Settings \u2192 Physics\n/*\nPhysics Settings for Robotics:\n- Gravity: (0, -9.81, 0) m/s\xb2\n- Default Material: Custom material with realistic friction\n- Bounce Threshold: 2 m/s\n- Sleep Threshold: 0.005 (keep objects from sleeping too early for control)\n- Default Contact Offset: 0.01\n- Solver Iteration Count: 6-10 (balance accuracy and performance)\n- Solver Velocity Iteration Count: 1\n- Queries Hit Backfaces: False (for sensors)\n- Queries Hit Triggers: True (for detection zones)\n- Enable Adaptive Force: False (for consistent control)\n- Layer Collision Matrix: Configure for robot self-collision if needed\n*/\n"})}),"\n",(0,t.jsx)(e.h3,{id:"custom-physics-material",children:"Custom Physics Material"}),"\n",(0,t.jsx)(e.p,{children:"Create realistic physics materials for robot components:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:'using UnityEngine;\n\n[CreateAssetMenu(fileName = "RobotPhysicsMaterial", menuName = "Robotics/Physics Material")]\npublic class RobotPhysicsMaterial : ScriptableObject\n{\n    [Header("Friction Properties")]\n    public float staticFriction = 0.5f;\n    public float dynamicFriction = 0.4f;\n    [Range(0, 1)] public float frictionCombine = 0; // 0=Average, 1=Minimum, 2=Maximum, 3=Multiply\n\n    [Header("Bounce Properties")]\n    [Range(0, 1)] public float bounciness = 0.1f;\n    [Range(0, 1)] public float bounceCombine = 0; // Same options as frictionCombine\n\n    [Header("Simulation Properties")]\n    public bool enableAdaptiveForce = false;\n    public float solverIterations = 6f;\n    public float solverVelocityIterations = 1f;\n\n    public PhysicMaterial CreatePhysicMaterial(string name = "RobotMaterial")\n    {\n        PhysicMaterial material = new PhysicMaterial(name);\n        material.staticFriction = staticFriction;\n        material.dynamicFriction = dynamicFriction;\n        material.frictionCombine = GetCombineMode(frictionCombine);\n        material.bounciness = bounciness;\n        material.bounceCombine = GetCombineMode(bounceCombine);\n\n        return material;\n    }\n\n    PhysicMaterialCombine GetCombineMode(float value)\n    {\n        if (value < 0.33f) return PhysicMaterialCombine.Average;\n        if (value < 0.66f) return PhysicMaterialCombine.Minimum;\n        if (value < 1.0f) return PhysicMaterialCombine.Maximum;\n        return PhysicMaterialCombine.Multiply;\n    }\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"robot-integration",children:"Robot Integration"}),"\n",(0,t.jsx)(e.h3,{id:"robot-prefab-structure",children:"Robot Prefab Structure"}),"\n",(0,t.jsx)(e.p,{children:"Create a well-structured robot prefab:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:'using UnityEngine;\n\npublic class RobotStructure : MonoBehaviour\n{\n    [Header("Robot Configuration")]\n    public string robotName = "HumanoidRobot";\n    public float massMultiplier = 1.0f;\n\n    [Header("Joint Configuration")]\n    public float defaultDamping = 0.1f;\n    public float defaultSpring = 10000f;\n    public float defaultMaxForce = 100f;\n\n    [Header("Sensor Configuration")]\n    public Transform[] sensorPoints;\n\n    void Start()\n    {\n        ConfigureRobotPhysics();\n        ConfigureJoints();\n    }\n\n    void ConfigureRobotPhysics()\n    {\n        // Apply consistent physics properties to all rigidbodies\n        Rigidbody[] rigidbodies = GetComponentsInChildren<Rigidbody>();\n        foreach (Rigidbody rb in rigidbodies)\n        {\n            rb.mass *= massMultiplier;\n            rb.drag = 0.01f;\n            rb.angularDrag = 0.05f;\n            rb.sleepThreshold = 0.005f;\n            rb.interpolation = RigidbodyInterpolation.Interpolate;\n        }\n    }\n\n    void ConfigureJoints()\n    {\n        // Configure all joints with realistic properties\n        ConfigurableJoint[] joints = GetComponentsInChildren<ConfigurableJoint>();\n        foreach (ConfigurableJoint joint in joints)\n        {\n            ConfigureJoint(joint);\n        }\n    }\n\n    void ConfigureJoint(ConfigurableJoint joint)\n    {\n        // Configure linear limits\n        SoftJointLimit linearLimit = joint.linearLimit;\n        linearLimit.limit = 0.0f; // Fixed position constraint\n        joint.linearLimit = linearLimit;\n\n        // Configure angular limits\n        SoftJointLimit lowAngularXLimit = joint.lowAngularXLimit;\n        lowAngularXLimit.limit = -45f * Mathf.Deg2Rad; // Convert to radians\n        joint.lowAngularXLimit = lowAngularXLimit;\n\n        SoftJointLimit highAngularXLimit = joint.highAngularXLimit;\n        highAngularXLimit.limit = 45f * Mathf.Deg2Rad;\n        joint.highAngularXLimit = highAngularXLimit;\n\n        // Configure drive for control\n        JointDrive angularXDrive = joint.angularXDrive;\n        angularXDrive.mode = JointDriveMode.PositionAndVelocity;\n        angularXDrive.positionSpring = defaultSpring;\n        angularXDrive.positionDamper = defaultDamping;\n        angularXDrive.maximumForce = defaultMaxForce;\n        joint.angularXDrive = angularXDrive;\n    }\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"sensor-integration",children:"Sensor Integration"}),"\n",(0,t.jsx)(e.p,{children:"Integrate sensors with proper physics configuration:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:'using UnityEngine;\n\npublic class RobotSensorSetup : MonoBehaviour\n{\n    [Header("Camera Sensors")]\n    public Camera[] cameras;\n    [SerializeField] private string cameraTopicPrefix = "/camera";\n\n    [Header("LIDAR Sensors")]\n    public Transform[] lidarPoints;\n    [SerializeField] private string lidarTopicPrefix = "/lidar";\n\n    [Header("IMU Sensors")]\n    public Transform[] imuPoints;\n    [SerializeField] private string imuTopicPrefix = "/imu";\n\n    void Start()\n    {\n        ConfigureCameras();\n        ConfigureLIDAR();\n        ConfigureIMUs();\n    }\n\n    void ConfigureCameras()\n    {\n        for (int i = 0; i < cameras.Length; i++)\n        {\n            Camera cam = cameras[i];\n            if (cam != null)\n            {\n                // Configure camera for realistic vision\n                cam.allowMSAA = true;\n                cam.allowDynamicResolution = true;\n\n                // Add perception components if using Unity Perception package\n                var syntheticCamera = cam.gameObject.AddComponent<Unity.Perception.GroundTruth.SyntheticCameraData>();\n                syntheticCamera.sensorId = $"{cameraTopicPrefix}_{i}";\n            }\n        }\n    }\n\n    void ConfigureLIDAR()\n    {\n        // LIDAR typically uses raycasting, configure collision layers\n        foreach (Transform lidarPoint in lidarPoints)\n        {\n            // Configure the lidar point\'s collision detection\n            // Set up appropriate layers for raycasting\n        }\n    }\n\n    void ConfigureIMUs()\n    {\n        // Configure IMU sensors with appropriate physics properties\n        foreach (Transform imuPoint in imuPoints)\n        {\n            // Add IMU-specific components\n            var imuSensor = imuPoint.gameObject.AddComponent<IMUMockup>();\n            imuSensor.Configure(this, imuPoint.name);\n        }\n    }\n}\n\n// Mock IMU component for demonstration\npublic class IMUMockup : MonoBehaviour\n{\n    private RobotSensorSetup robot;\n    private string sensorName;\n\n    public void Configure(RobotSensorSetup robotSetup, string name)\n    {\n        robot = robotSetup;\n        sensorName = name;\n    }\n\n    void Update()\n    {\n        // Simulate IMU data\n        // This would typically interface with ROS through the TCP connector\n    }\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"scene-management",children:"Scene Management"}),"\n",(0,t.jsx)(e.h3,{id:"scene-controller",children:"Scene Controller"}),"\n",(0,t.jsx)(e.p,{children:"Create a scene controller for managing simulation state:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:'using UnityEngine;\nusing Unity.Robotics.ROSTCPConnector;\n\npublic class SceneController : MonoBehaviour\n{\n    [Header("Simulation Control")]\n    [SerializeField] private float simulationSpeed = 1.0f;\n    [SerializeField] private bool useFixedTimeStep = true;\n    [SerializeField] private float fixedTimeStep = 0.02f; // 50 Hz\n\n    [Header("ROS Connection")]\n    [SerializeField] private string rosIPAddress = "127.0.0.1";\n    [SerializeField] private int rosPort = 10000;\n\n    private ROSConnection rosConnection;\n    private bool isSimulationRunning = false;\n\n    void Start()\n    {\n        SetupROSLifecycle();\n        ConfigureTimeStep();\n    }\n\n    void SetupROSLifecycle()\n    {\n        // Initialize ROS connection\n        rosConnection = ROSConnection.GetOrCreateInstance();\n        rosConnection.rosIPAddress = rosIPAddress;\n        rosConnection.rosPort = rosPort;\n\n        // Register shutdown callback\n        Application.quitting += OnApplicationQuit;\n    }\n\n    void ConfigureTimeStep()\n    {\n        if (useFixedTimeStep)\n        {\n            Time.fixedDeltaTime = fixedTimeStep;\n        }\n    }\n\n    void OnApplicationQuit()\n    {\n        // Clean up ROS connection\n        if (rosConnection != null)\n        {\n            rosConnection.Close();\n        }\n    }\n\n    public void StartSimulation()\n    {\n        isSimulationRunning = true;\n        // Publish simulation start message to ROS\n    }\n\n    public void StopSimulation()\n    {\n        isSimulationRunning = false;\n        // Publish simulation stop message to ROS\n    }\n\n    public void ResetSimulation()\n    {\n        // Reset robot positions, clear data, etc.\n        ResetRobots();\n    }\n\n    void ResetRobots()\n    {\n        RobotStructure[] robots = FindObjectsOfType<RobotStructure>();\n        foreach (RobotStructure robot in robots)\n        {\n            // Reset robot to initial configuration\n            ResetRobotToInitialPosition(robot);\n        }\n    }\n\n    void ResetRobotToInitialPosition(RobotStructure robot)\n    {\n        // Store initial positions and reset to them\n        Transform robotTransform = robot.transform;\n        robotTransform.position = robotTransform.position; // Or use stored initial position\n        robotTransform.rotation = robotTransform.rotation; // Or use stored initial rotation\n\n        // Reset all joint positions\n        ConfigurableJoint[] joints = robot.GetComponentsInChildren<ConfigurableJoint>();\n        foreach (ConfigurableJoint joint in joints)\n        {\n            // Reset joint to initial configuration\n        }\n    }\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"performance-optimization",children:"Performance Optimization"}),"\n",(0,t.jsx)(e.h3,{id:"physics-optimization",children:"Physics Optimization"}),"\n",(0,t.jsx)(e.p,{children:"Configure physics for optimal performance:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:'using UnityEngine;\n\npublic class PhysicsOptimizer : MonoBehaviour\n{\n    [Header("Performance Settings")]\n    [SerializeField] private int solverIterationCount = 6;\n    [SerializeField] private int solverVelocityIterationCount = 1;\n    [SerializeField] private float contactOffset = 0.01f;\n    [SerializeField] private float sleepThreshold = 0.005f;\n\n    [Header("Simulation Quality")]\n    [SerializeField] private bool enableAdaptiveForce = false;\n    [SerializeField] private bool enableContinuousCollisionDetection = false;\n    [SerializeField] private CollisionDetectionMode collisionDetectionMode = CollisionDetectionMode.Discrete;\n\n    void Start()\n    {\n        OptimizePhysicsSettings();\n    }\n\n    void OptimizePhysicsSettings()\n    {\n        Physics.defaultSolverIterations = solverIterationCount;\n        Physics.defaultSolverVelocityIterations = solverVelocityIterationCount;\n        Physics.defaultContactOffset = contactOffset;\n        Physics.sleepThreshold = sleepThreshold;\n        Physics.defaultUseAdaptiveForce = enableAdaptiveForce;\n        Physics.defaultSolverContactOffset = contactOffset;\n\n        // Apply settings to all rigidbodies in the scene\n        Rigidbody[] allRigidbodies = FindObjectsOfType<Rigidbody>();\n        foreach (Rigidbody rb in allRigidbodies)\n        {\n            rb.collisionDetectionMode = enableContinuousCollisionDetection ?\n                CollisionDetectionMode.Continuous : collisionDetectionMode;\n        }\n    }\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"level-of-detail-lod-for-complex-robots",children:"Level of Detail (LOD) for Complex Robots"}),"\n",(0,t.jsx)(e.p,{children:"Implement LOD for complex robot models:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:"using UnityEngine;\n\npublic class RobotLODManager : MonoBehaviour\n{\n    [System.Serializable]\n    public class LODLevel\n    {\n        public string name;\n        public float distance;\n        public GameObject[] objects;\n    }\n\n    [SerializeField] private LODLevel[] lodLevels;\n    [SerializeField] private Transform cameraTransform;\n\n    private int currentLOD = 0;\n\n    void Start()\n    {\n        if (cameraTransform == null)\n        {\n            cameraTransform = Camera.main.transform;\n        }\n    }\n\n    void Update()\n    {\n        UpdateLOD();\n    }\n\n    void UpdateLOD()\n    {\n        float distance = Vector3.Distance(transform.position, cameraTransform.position);\n\n        int newLOD = 0;\n        for (int i = 0; i < lodLevels.Length; i++)\n        {\n            if (distance > lodLevels[i].distance)\n            {\n                newLOD = i;\n            }\n            else\n            {\n                break;\n            }\n        }\n\n        if (newLOD != currentLOD)\n        {\n            SetLOD(newLOD);\n            currentLOD = newLOD;\n        }\n    }\n\n    void SetLOD(int lodIndex)\n    {\n        for (int i = 0; i < lodLevels.Length; i++)\n        {\n            bool isActive = i == lodIndex;\n            foreach (GameObject obj in lodLevels[i].objects)\n            {\n                if (obj != null)\n                {\n                    obj.SetActive(isActive);\n                }\n            }\n        }\n    }\n}\n"})}),"\n",(0,t.jsx)(e.h2,{id:"debugging-and-visualization",children:"Debugging and Visualization"}),"\n",(0,t.jsx)(e.h3,{id:"physics-debugging-tools",children:"Physics Debugging Tools"}),"\n",(0,t.jsx)(e.p,{children:"Create tools for debugging physics simulation:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:'using UnityEngine;\n\npublic class PhysicsDebugger : MonoBehaviour\n{\n    [Header("Debug Settings")]\n    [SerializeField] private bool showColliders = true;\n    [SerializeField] private bool showJoints = true;\n    [SerializeField] private bool showForces = true;\n    [SerializeField] private Color colliderColor = Color.blue;\n    [SerializeField] private Color jointColor = Color.green;\n\n    void OnDrawGizmos()\n    {\n        if (showColliders)\n        {\n            DrawColliders();\n        }\n\n        if (showJoints)\n        {\n            DrawJoints();\n        }\n\n        if (showForces)\n        {\n            DrawForces();\n        }\n    }\n\n    void DrawColliders()\n    {\n        Collider[] colliders = GetComponentsInChildren<Collider>();\n        foreach (Collider col in colliders)\n        {\n            Gizmos.color = colliderColor;\n            if (col is BoxCollider)\n            {\n                BoxCollider box = (BoxCollider)col;\n                Gizmos.matrix = Matrix4x4.TRS(box.transform.position, box.transform.rotation, Vector3.one);\n                Gizmos.DrawWireCube(box.center, box.size);\n            }\n            else if (col is SphereCollider)\n            {\n                SphereCollider sphere = (SphereCollider)col;\n                Gizmos.matrix = Matrix4x4.TRS(box.transform.position, box.transform.rotation, Vector3.one);\n                Gizmos.DrawWireSphere(sphere.center, sphere.radius);\n            }\n            // Add other collider types as needed\n        }\n    }\n\n    void DrawJoints()\n    {\n        ConfigurableJoint[] joints = GetComponentsInChildren<ConfigurableJoint>();\n        foreach (ConfigurableJoint joint in joints)\n        {\n            Gizmos.color = jointColor;\n            Gizmos.DrawWireSphere(joint.transform.position, 0.1f);\n\n            if (joint.connectedBody != null)\n            {\n                Gizmos.DrawLine(joint.transform.position, joint.connectedBody.transform.position);\n            }\n        }\n    }\n\n    void DrawForces()\n    {\n        Rigidbody[] rigidbodies = GetComponentsInChildren<Rigidbody>();\n        foreach (Rigidbody rb in rigidbodies)\n        {\n            Vector3 force = rb.velocity * rb.mass; // Approximate force\n            Gizmos.color = Color.red;\n            Gizmos.DrawRay(rb.position, force.normalized * 0.5f);\n        }\n    }\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsx)(e.h3,{id:"1-consistent-units",children:"1. Consistent Units"}),"\n",(0,t.jsx)(e.p,{children:"Always use SI units (meters, kilograms, seconds) to match ROS conventions:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:"// Configuration constants using SI units\npublic static class RobotConstants\n{\n    public const float Gravity = 9.81f; // m/s\xb2\n    public const float MassMultiplier = 1.0f; // kg\n    public const float LengthScale = 1.0f; // meters\n    public const float VelocityScale = 1.0f; // m/s\n    public const float TorqueScale = 1.0f; // N\u22c5m\n}\n"})}),"\n",(0,t.jsx)(e.h3,{id:"2-modularity",children:"2. Modularity"}),"\n",(0,t.jsx)(e.p,{children:"Create modular components that can be reused:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:"// Generic sensor base class\npublic abstract class RobotSensor : MonoBehaviour\n{\n    [SerializeField] protected string topicName;\n    [SerializeField] protected string frameId;\n    [SerializeField] protected float updateRate = 30f; // Hz\n\n    protected float updateInterval;\n    protected float lastUpdateTime;\n\n    protected virtual void Start()\n    {\n        updateInterval = 1.0f / updateRate;\n        lastUpdateTime = 0;\n    }\n\n    protected virtual void Update()\n    {\n        if (Time.time - lastUpdateTime >= updateInterval)\n        {\n            UpdateSensorData();\n            lastUpdateTime = Time.time;\n        }\n    }\n\n    protected abstract void UpdateSensorData();\n}\n"})}),"\n",(0,t.jsx)(e.h3,{id:"3-error-handling",children:"3. Error Handling"}),"\n",(0,t.jsx)(e.p,{children:"Implement robust error handling for ROS connections:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:'using UnityEngine;\nusing Unity.Robotics.ROSTCPConnector;\n\npublic class RobustROSConnection : MonoBehaviour\n{\n    [SerializeField] private string rosIPAddress = "127.0.0.1";\n    [SerializeField] private int rosPort = 10000;\n    [SerializeField] private float connectionRetryDelay = 5f;\n\n    private ROSConnection rosConnection;\n    private bool isConnected = false;\n    private float lastConnectionAttempt = 0f;\n\n    void Start()\n    {\n        InitializeROSConnection();\n    }\n\n    void InitializeROSConnection()\n    {\n        try\n        {\n            rosConnection = ROSConnection.GetOrCreateInstance();\n            rosConnection.rosIPAddress = rosIPAddress;\n            rosConnection.rosPort = rosPort;\n            rosConnection.OnConnected += OnConnected;\n            rosConnection.OnDisconnected += OnDisconnected;\n        }\n        catch (System.Exception e)\n        {\n            Debug.LogError($"Failed to initialize ROS connection: {e.Message}");\n        }\n    }\n\n    void OnConnected()\n    {\n        isConnected = true;\n        Debug.Log("Successfully connected to ROS");\n        OnROSConnected();\n    }\n\n    void OnDisconnected()\n    {\n        isConnected = false;\n        Debug.LogWarning("Disconnected from ROS");\n        AttemptReconnection();\n    }\n\n    void AttemptReconnection()\n    {\n        if (Time.time - lastConnectionAttempt > connectionRetryDelay)\n        {\n            lastConnectionAttempt = Time.time;\n            InitializeROSConnection();\n        }\n    }\n\n    protected virtual void OnROSConnected()\n    {\n        // Override in derived classes\n    }\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"exercise",children:"Exercise"}),"\n",(0,t.jsx)(e.p,{children:"Create a complete Unity scene for humanoid robot simulation that includes:"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsx)(e.li,{children:"A well-structured scene hierarchy with proper organization"}),"\n",(0,t.jsx)(e.li,{children:"Physics configuration optimized for humanoid robot simulation"}),"\n",(0,t.jsx)(e.li,{children:"A robot prefab with realistic physical properties"}),"\n",(0,t.jsx)(e.li,{children:"Proper lighting and environment setup"}),"\n",(0,t.jsx)(e.li,{children:"Sensor configurations for cameras, LIDAR, and IMU"}),"\n",(0,t.jsx)(e.li,{children:"Performance optimization techniques"}),"\n",(0,t.jsx)(e.li,{children:"Debugging visualization tools"}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:"Test your scene by ensuring the robot behaves realistically with proper physics interactions and can communicate with ROS systems."})]})}function u(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(d,{...n})}):d(n)}},8453:(n,e,i)=>{i.d(e,{R:()=>a,x:()=>s});var o=i(6540);const t={},r=o.createContext(t);function a(n){const e=o.useContext(r);return o.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:a(n.components),o.createElement(r.Provider,{value:e},n.children)}}}]);