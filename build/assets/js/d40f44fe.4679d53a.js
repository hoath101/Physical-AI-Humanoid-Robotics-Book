"use strict";(globalThis.webpackChunkphysical_ai_humanoid_robotics_book=globalThis.webpackChunkphysical_ai_humanoid_robotics_book||[]).push([[818],{376:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>a,contentTitle:()=>l,default:()=>p,frontMatter:()=>t,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"module-1-ros2/nodes-topics-services","title":"Nodes, Topics, Services","description":"In this section, we\'ll explore the fundamental communication patterns in ROS 2: nodes, topics, and services. These concepts form the backbone of robotic applications and enable different components to work together seamlessly.","source":"@site/docs/module-1-ros2/nodes-topics-services.md","sourceDirName":"module-1-ros2","slug":"/module-1-ros2/nodes-topics-services","permalink":"/Physical-AI-Humanoid-Robotics-Book/docs/module-1-ros2/nodes-topics-services","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"ROS 2 Installation and Setup","permalink":"/Physical-AI-Humanoid-Robotics-Book/docs/module-1-ros2/installation-setup"},"next":{"title":"Practical Exercises - ROS 2 Fundamentals","permalink":"/Physical-AI-Humanoid-Robotics-Book/docs/module-1-ros2/practical-exercises"}}');var o=n(4848),r=n(8453);const t={},l="Nodes, Topics, Services",a={},c=[{value:"Nodes",id:"nodes",level:2},{value:"Creating a Node",id:"creating-a-node",level:3},{value:"Topics",id:"topics",level:2},{value:"Topic Communication Example",id:"topic-communication-example",level:3},{value:"Services",id:"services",level:2},{value:"Service Example",id:"service-example",level:3},{value:"Actions",id:"actions",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Exercise",id:"exercise",level:2}];function d(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.header,{children:(0,o.jsx)(s.h1,{id:"nodes-topics-services",children:"Nodes, Topics, Services"})}),"\n",(0,o.jsx)(s.p,{children:"In this section, we'll explore the fundamental communication patterns in ROS 2: nodes, topics, and services. These concepts form the backbone of robotic applications and enable different components to work together seamlessly."}),"\n",(0,o.jsx)(s.h2,{id:"nodes",children:"Nodes"}),"\n",(0,o.jsx)(s.p,{children:"A node is an executable process that works as part of a ROS 2 system. Nodes are the basic building blocks of a ROS 2 application and perform specific tasks. In a humanoid robot system, you might have nodes for:"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:"Sensor processing"}),"\n",(0,o.jsx)(s.li,{children:"Motor control"}),"\n",(0,o.jsx)(s.li,{children:"Path planning"}),"\n",(0,o.jsx)(s.li,{children:"Perception"}),"\n",(0,o.jsx)(s.li,{children:"Behavior management"}),"\n"]}),"\n",(0,o.jsx)(s.h3,{id:"creating-a-node",children:"Creating a Node"}),"\n",(0,o.jsx)(s.p,{children:"Here's a basic example of a ROS 2 node in Python:"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\n\nclass MinimalPublisher(Node):\n\n    def __init__(self):\n        super().__init__('minimal_publisher')\n        self.publisher_ = self.create_publisher(String, 'topic', 10)\n        timer_period = 0.5  # seconds\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n        self.i = 0\n\n    def timer_callback(self):\n        msg = String()\n        msg.data = 'Hello World: %d' % self.i\n        self.publisher_.publish(msg)\n        self.get_logger().info('Publishing: \"%s\"' % msg.data)\n        self.i += 1\n\ndef main(args=None):\n    rclpy.init(args=args)\n    minimal_publisher = MinimalPublisher()\n    rclpy.spin(minimal_publisher)\n    minimal_publisher.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,o.jsx)(s.h2,{id:"topics",children:"Topics"}),"\n",(0,o.jsx)(s.p,{children:"Topics enable asynchronous communication between nodes through a publish/subscribe model. Nodes can publish messages to topics and subscribe to topics to receive messages. This pattern is ideal for continuous data streams like sensor readings or motor commands."}),"\n",(0,o.jsx)(s.h3,{id:"topic-communication-example",children:"Topic Communication Example"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-python",children:"# Publisher node\nimport rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\nclass Talker(Node):\n\n    def __init__(self):\n        super().__init__('talker')\n        self.publisher = self.create_publisher(String, 'chatter', 10)\n        timer_period = 0.5\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n\n    def timer_callback(self):\n        msg = String()\n        msg.data = 'Hello World'\n        self.publisher.publish(msg)\n        self.get_logger().info('Publishing: \"%s\"' % msg.data)\n\n# Subscriber node\nclass Listener(Node):\n\n    def __init__(self):\n        super().__init__('listener')\n        self.subscription = self.create_subscription(\n            String,\n            'chatter',\n            self.listener_callback,\n            10)\n        self.subscription  # prevent unused variable warning\n\n    def listener_callback(self, msg):\n        self.get_logger().info('I heard: \"%s\"' % msg.data)\n"})}),"\n",(0,o.jsx)(s.h2,{id:"services",children:"Services"}),"\n",(0,o.jsx)(s.p,{children:"Services provide synchronous request/response communication between nodes. Unlike topics, services are used for specific requests that require a response, such as requesting a specific action or configuration change."}),"\n",(0,o.jsx)(s.h3,{id:"service-example",children:"Service Example"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-python",children:"# Service server\nfrom example_interfaces.srv import AddTwoInts\n\nclass AddTwoIntsServer(Node):\n\n    def __init__(self):\n        super().__init__('add_two_ints_server')\n        self.srv = self.create_service(AddTwoInts, 'add_two_ints', self.add_two_ints_callback)\n\n    def add_two_ints_callback(self, request, response):\n        response.sum = request.a + request.b\n        self.get_logger().info('Incoming request\\na: %d b: %d' % (request.a, request.b))\n        return response\n\n# Service client\nclass AddTwoIntsClient(Node):\n\n    def __init__(self):\n        super().__init__('add_two_ints_client')\n        self.cli = self.create_client(AddTwoInts, 'add_two_ints')\n        while not self.cli.wait_for_service(timeout_sec=1.0):\n            self.get_logger().info('service not available, waiting again...')\n        self.req = AddTwoInts.Request()\n\n    def send_request(self, a, b):\n        self.req.a = a\n        self.req.b = b\n        self.future = self.cli.call_async(self.req)\n        rclpy.spin_until_future_complete(self, self.future)\n        return self.future.result()\n"})}),"\n",(0,o.jsx)(s.h2,{id:"actions",children:"Actions"}),"\n",(0,o.jsx)(s.p,{children:"Actions are used for long-running tasks that may take time to complete and provide feedback during execution. They're particularly useful for tasks like navigation or manipulation that require ongoing communication about progress."}),"\n",(0,o.jsx)(s.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:"Use topics for continuous data streams (sensor data, motor commands)"}),"\n",(0,o.jsx)(s.li,{children:"Use services for specific requests that need immediate responses"}),"\n",(0,o.jsx)(s.li,{children:"Use actions for long-running tasks that require feedback"}),"\n",(0,o.jsx)(s.li,{children:"Keep message types consistent across your system"}),"\n",(0,o.jsx)(s.li,{children:"Use appropriate Quality of Service (QoS) settings for your use case"}),"\n"]}),"\n",(0,o.jsx)(s.h2,{id:"exercise",children:"Exercise"}),"\n",(0,o.jsx)(s.p,{children:"Create a simple ROS 2 package with a publisher node that publishes joint positions for a humanoid robot and a subscriber node that logs these positions to the console."})]})}function p(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>t,x:()=>l});var i=n(6540);const o={},r=i.createContext(o);function t(e){const s=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),i.createElement(r.Provider,{value:s},e.children)}}}]);