"use strict";(globalThis.webpackChunkphysical_ai_humanoid_robotics_book=globalThis.webpackChunkphysical_ai_humanoid_robotics_book||[]).push([[302],{7836:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"module-1-ros2/practical-exercises","title":"Practical Exercises - ROS 2 Fundamentals","description":"This section provides hands-on exercises to reinforce the concepts learned in the ROS 2 module. Complete these exercises to gain practical experience with ROS 2 nodes, topics, services, and URDF.","source":"@site/docs/module-1-ros2/practical-exercises.md","sourceDirName":"module-1-ros2","slug":"/module-1-ros2/practical-exercises","permalink":"/Physical-AI-Humanoid-Robotics-Book/docs/module-1-ros2/practical-exercises","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Nodes, Topics, Services","permalink":"/Physical-AI-Humanoid-Robotics-Book/docs/module-1-ros2/nodes-topics-services"},"next":{"title":"rclpy Basics","permalink":"/Physical-AI-Humanoid-Robotics-Book/docs/module-1-ros2/rclpy-basics"}}');var t=i(4848),r=i(8453);const o={},l="Practical Exercises - ROS 2 Fundamentals",a={},c=[{value:"Exercise 1: Basic Publisher and Subscriber",id:"exercise-1-basic-publisher-and-subscriber",level:2},{value:"Objective",id:"objective",level:3},{value:"Steps",id:"steps",level:3},{value:"Code Template",id:"code-template",level:3},{value:"Expected Output",id:"expected-output",level:3},{value:"Exercise 2: Service for Robot Control",id:"exercise-2-service-for-robot-control",level:2},{value:"Objective",id:"objective-1",level:3},{value:"Steps",id:"steps-1",level:3},{value:"Service Definition (<code>srv/ValidatePosition.srv</code>)",id:"service-definition-srvvalidatepositionsrv",level:3},{value:"Exercise 3: URDF Robot Model",id:"exercise-3-urdf-robot-model",level:2},{value:"Objective",id:"objective-2",level:3},{value:"Steps",id:"steps-2",level:3},{value:"Template Structure",id:"template-structure",level:3},{value:"Exercise 4: Robot State Publisher Integration",id:"exercise-4-robot-state-publisher-integration",level:2},{value:"Objective",id:"objective-3",level:3},{value:"Steps",id:"steps-3",level:3},{value:"Launch File Template",id:"launch-file-template",level:3},{value:"Exercise 5: Complete Control Node",id:"exercise-5-complete-control-node",level:2},{value:"Objective",id:"objective-4",level:3},{value:"Steps",id:"steps-4",level:3},{value:"Template",id:"template",level:3},{value:"Validation and Testing",id:"validation-and-testing",level:2},{value:"Troubleshooting Tips",id:"troubleshooting-tips",level:2},{value:"Extension Challenges",id:"extension-challenges",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"practical-exercises---ros-2-fundamentals",children:"Practical Exercises - ROS 2 Fundamentals"})}),"\n",(0,t.jsx)(n.p,{children:"This section provides hands-on exercises to reinforce the concepts learned in the ROS 2 module. Complete these exercises to gain practical experience with ROS 2 nodes, topics, services, and URDF."}),"\n",(0,t.jsx)(n.h2,{id:"exercise-1-basic-publisher-and-subscriber",children:"Exercise 1: Basic Publisher and Subscriber"}),"\n",(0,t.jsx)(n.h3,{id:"objective",children:"Objective"}),"\n",(0,t.jsx)(n.p,{children:"Create a simple publisher that sends messages containing the current joint positions of a humanoid robot and a subscriber that logs these positions."}),"\n",(0,t.jsx)(n.h3,{id:"steps",children:"Steps"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Create a new ROS 2 package called ",(0,t.jsx)(n.code,{children:"humanoid_control"})]}),"\n",(0,t.jsxs)(n.li,{children:["Create a publisher node that publishes joint positions as a ",(0,t.jsx)(n.code,{children:"sensor_msgs/JointState"})," message"]}),"\n",(0,t.jsx)(n.li,{children:"Create a subscriber node that receives and logs the joint positions"}),"\n",(0,t.jsx)(n.li,{children:"Use appropriate message types and topic names"}),"\n",(0,t.jsx)(n.li,{children:"Test the communication between nodes"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"code-template",children:"Code Template"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"# publisher_node.py\nimport rclpy\nfrom rclpy.node import Node\nfrom sensor_msgs.msg import JointState\nimport math\n\nclass JointStatePublisher(Node):\n    def __init__(self):\n        super().__init__('joint_state_publisher')\n        self.publisher = self.create_publisher(JointState, 'joint_states', 10)\n        self.timer = self.create_timer(0.1, self.publish_joint_state)\n        self.time = 0.0\n\n    def publish_joint_state(self):\n        msg = JointState()\n        msg.name = ['hip_joint', 'knee_joint', 'ankle_joint', 'shoulder_joint', 'elbow_joint']\n        msg.position = [\n            math.sin(self.time),           # hip\n            math.cos(self.time) * 0.5,     # knee\n            math.sin(self.time * 0.5),     # ankle\n            math.cos(self.time * 0.3),     # shoulder\n            math.sin(self.time * 0.7)      # elbow\n        ]\n        msg.header.stamp = self.get_clock().now().to_msg()\n        msg.header.frame_id = 'base_link'\n\n        self.publisher.publish(msg)\n        self.time += 0.1\n\ndef main(args=None):\n    rclpy.init(args=args)\n    node = JointStatePublisher()\n    rclpy.spin(node)\n    node.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,t.jsx)(n.h3,{id:"expected-output",children:"Expected Output"}),"\n",(0,t.jsx)(n.p,{children:"The subscriber should log joint positions at 10Hz, showing oscillating values for each joint."}),"\n",(0,t.jsx)(n.h2,{id:"exercise-2-service-for-robot-control",children:"Exercise 2: Service for Robot Control"}),"\n",(0,t.jsx)(n.h3,{id:"objective-1",children:"Objective"}),"\n",(0,t.jsx)(n.p,{children:"Create a service that accepts a target position for a humanoid robot and returns whether the position is reachable."}),"\n",(0,t.jsx)(n.h3,{id:"steps-1",children:"Steps"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Define a custom service message for position validation"}),"\n",(0,t.jsx)(n.li,{children:"Create a service server that checks if a position is within the robot's reach"}),"\n",(0,t.jsx)(n.li,{children:"Create a client that calls the service with different positions"}),"\n",(0,t.jsx)(n.li,{children:"Test with both reachable and unreachable positions"}),"\n"]}),"\n",(0,t.jsxs)(n.h3,{id:"service-definition-srvvalidatepositionsrv",children:["Service Definition (",(0,t.jsx)(n.code,{children:"srv/ValidatePosition.srv"}),")"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"geometry_msgs/Point target_position\n---\nbool is_reachable\nstring reason\n"})}),"\n",(0,t.jsx)(n.h2,{id:"exercise-3-urdf-robot-model",children:"Exercise 3: URDF Robot Model"}),"\n",(0,t.jsx)(n.h3,{id:"objective-2",children:"Objective"}),"\n",(0,t.jsx)(n.p,{children:"Create a complete URDF model of a simple humanoid robot with proper kinematic chains."}),"\n",(0,t.jsx)(n.h3,{id:"steps-2",children:"Steps"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Create a URDF file defining a humanoid with body, head, arms, and legs"}),"\n",(0,t.jsx)(n.li,{children:"Include proper joint types and limits"}),"\n",(0,t.jsx)(n.li,{children:"Add visual and collision properties"}),"\n",(0,t.jsx)(n.li,{children:"Use Xacro to create macros for similar limbs"}),"\n",(0,t.jsxs)(n.li,{children:["Validate the URDF using ",(0,t.jsx)(n.code,{children:"check_urdf"})]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"template-structure",children:"Template Structure"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\n<robot name="simple_humanoid" xmlns:xacro="http://www.ros.org/wiki/xacro">\n  \x3c!-- Define properties --\x3e\n  <xacro:property name="M_PI" value="3.1415926535897931" />\n\n  \x3c!-- Base body --\x3e\n  <link name="base_link">\n    <visual>\n      <geometry>\n        <box size="0.3 0.2 0.5"/>\n      </geometry>\n      <material name="gray">\n        <color rgba="0.5 0.5 0.5 1"/>\n      </material>\n    </visual>\n    \x3c!-- Add collision and inertial properties --\x3e\n  </link>\n\n  \x3c!-- Use Xacro macros for limbs --\x3e\n  <xacro:macro name="arm" params="name parent xyz">\n    \x3c!-- Define arm structure with joints --\x3e\n  </xacro:macro>\n\n  \x3c!-- Create arms using macros --\x3e\n  <xacro:arm name="left" parent="base_link" xyz="0.15 0 0.1"/>\n  <xacro:arm name="right" parent="base_link" xyz="0.15 0 0.1"/>\n</robot>\n'})}),"\n",(0,t.jsx)(n.h2,{id:"exercise-4-robot-state-publisher-integration",children:"Exercise 4: Robot State Publisher Integration"}),"\n",(0,t.jsx)(n.h3,{id:"objective-3",children:"Objective"}),"\n",(0,t.jsx)(n.p,{children:"Integrate your URDF model with the robot_state_publisher to visualize joint transformations."}),"\n",(0,t.jsx)(n.h3,{id:"steps-3",children:"Steps"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Create a launch file that starts your joint state publisher and robot_state_publisher"}),"\n",(0,t.jsxs)(n.li,{children:["Use the ",(0,t.jsx)(n.code,{children:"--ros-args"})," to pass the URDF to robot_state_publisher"]}),"\n",(0,t.jsx)(n.li,{children:"Visualize the robot in RViz2"}),"\n",(0,t.jsx)(n.li,{children:"Verify that joint transformations are properly published"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"launch-file-template",children:"Launch File Template"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"from launch import LaunchDescription\nfrom launch.actions import DeclareLaunchArgument\nfrom launch.substitutions import Command, LaunchConfiguration\nfrom launch_ros.actions import Node\nfrom ament_index_python.packages import get_package_share_directory\n\ndef generate_launch_description():\n    use_sim_time = LaunchConfiguration('use_sim_time')\n\n    urdf_file = get_package_share_directory('humanoid_control') + '/urdf/humanoid.urdf'\n\n    robot_state_publisher_node = Node(\n        package='robot_state_publisher',\n        executable='robot_state_publisher',\n        parameters=[{\n            'use_sim_time': use_sim_time,\n            'robot_description': Command(['xacro ', urdf_file])\n        }]\n    )\n\n    joint_state_publisher_node = Node(\n        package='humanoid_control',\n        executable='joint_state_publisher',\n        name='joint_state_publisher'\n    )\n\n    return LaunchDescription([\n        DeclareLaunchArgument(\n            'use_sim_time',\n            default_value='false',\n            description='Use sim time if true'),\n        robot_state_publisher_node,\n        joint_state_publisher_node\n    ])\n"})}),"\n",(0,t.jsx)(n.h2,{id:"exercise-5-complete-control-node",children:"Exercise 5: Complete Control Node"}),"\n",(0,t.jsx)(n.h3,{id:"objective-4",children:"Objective"}),"\n",(0,t.jsx)(n.p,{children:"Create a complete control node that integrates all concepts: publishers, subscribers, services, and parameters."}),"\n",(0,t.jsx)(n.h3,{id:"steps-4",children:"Steps"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Create a node that subscribes to desired joint positions"}),"\n",(0,t.jsx)(n.li,{children:"Publish current joint states"}),"\n",(0,t.jsx)(n.li,{children:"Provide a service to validate positions"}),"\n",(0,t.jsx)(n.li,{children:"Use parameters to configure control behavior"}),"\n",(0,t.jsx)(n.li,{children:"Add proper logging and error handling"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"template",children:"Template"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom sensor_msgs.msg import JointState\nfrom std_srvs.srv import SetBool  # or your custom service\nimport numpy as np\n\nclass HumanoidController(Node):\n    def __init__(self):\n        super().__init__('humanoid_controller')\n\n        # Declare parameters\n        self.declare_parameter('control_frequency', 50)\n        self.declare_parameter('max_velocity', 2.0)\n\n        # Create publishers and subscribers\n        self.joint_state_pub = self.create_publisher(JointState, 'joint_states', 10)\n        self.joint_command_sub = self.create_subscription(\n            JointState, 'joint_commands', self.joint_command_callback, 10)\n\n        # Create services\n        self.validate_srv = self.create_service(\n            ValidatePosition, 'validate_position', self.validate_position_callback)\n\n        # Create timer\n        freq = self.get_parameter('control_frequency').value\n        self.timer = self.create_timer(1.0/freq, self.control_loop)\n\n        # Initialize joint states\n        self.current_joints = JointState()\n\n    def joint_command_callback(self, msg):\n        # Process joint commands\n        pass\n\n    def validate_position_callback(self, request, response):\n        # Validate if position is reachable\n        pass\n\n    def control_loop(self):\n        # Main control loop\n        pass\n\ndef main(args=None):\n    rclpy.init(args=args)\n    controller = HumanoidController()\n    rclpy.spin(controller)\n    controller.destroy_node()\n    rclpy.shutdown()\n"})}),"\n",(0,t.jsx)(n.h2,{id:"validation-and-testing",children:"Validation and Testing"}),"\n",(0,t.jsx)(n.p,{children:"To verify your implementations:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Check URDF validity"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"check_urdf path/to/your/robot.urdf\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"List ROS 2 topics"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"ros2 topic list\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Echo topics"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"ros2 topic echo /joint_states\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Call services"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'ros2 service call /validate_position your_robot_msgs/srv/ValidatePosition "{target_position: {x: 1.0, y: 0.0, z: 0.0}}"\n'})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"troubleshooting-tips",children:"Troubleshooting Tips"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Ensure all packages are properly sourced: ",(0,t.jsx)(n.code,{children:"source /opt/ros/humble/setup.bash"})]}),"\n",(0,t.jsxs)(n.li,{children:["Check that your package has the correct dependencies in ",(0,t.jsx)(n.code,{children:"package.xml"})]}),"\n",(0,t.jsx)(n.li,{children:"Verify that your CMakeLists.txt includes all necessary libraries"}),"\n",(0,t.jsxs)(n.li,{children:["Use ",(0,t.jsx)(n.code,{children:"rqt_graph"})," to visualize the ROS graph and verify connections"]}),"\n",(0,t.jsx)(n.li,{children:"Check that joint names in your messages match those in your URDF"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"extension-challenges",children:"Extension Challenges"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Add a simple PID controller to your joint control node"}),"\n",(0,t.jsx)(n.li,{children:"Implement a basic trajectory execution interface"}),"\n",(0,t.jsx)(n.li,{children:"Create a simple GUI using rqt to control the robot"}),"\n",(0,t.jsx)(n.li,{children:"Add collision checking between robot links"}),"\n",(0,t.jsx)(n.li,{children:"Implement forward and inverse kinematics for simple movements"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Complete these exercises to solidify your understanding of ROS 2 fundamentals before moving to the next module."})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>l});var s=i(6540);const t={},r=s.createContext(t);function o(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);