"use strict";(globalThis.webpackChunkphysical_ai_humanoid_robotics_book=globalThis.webpackChunkphysical_ai_humanoid_robotics_book||[]).push([[643],{1856:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>t,contentTitle:()=>r,default:()=>u,frontMatter:()=>s,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"module-2-digital-twin/gazebo-simulation","title":"Gazebo Simulation","description":"Gazebo is the standard simulation environment for ROS and provides a powerful physics engine for realistic robot simulation. This section covers setting up Gazebo, creating simulation worlds, and integrating with ROS 2.","source":"@site/docs/module-2-digital-twin/gazebo-simulation.md","sourceDirName":"module-2-digital-twin","slug":"/module-2-digital-twin/gazebo-simulation","permalink":"/Physical-AI-Humanoid-Robotics-Book/docs/module-2-digital-twin/gazebo-simulation","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Module 2 Digital Twin","permalink":"/Physical-AI-Humanoid-Robotics-Book/docs/module-2-digital-twin/"},"next":{"title":"Gazebo World Setup and Configuration","permalink":"/Physical-AI-Humanoid-Robotics-Book/docs/module-2-digital-twin/gazebo-world-setup"}}');var a=i(4848),l=i(8453);const s={},r="Gazebo Simulation",t={},c=[{value:"Introduction to Gazebo",id:"introduction-to-gazebo",level:2},{value:"Installation",id:"installation",level:2},{value:"Basic Gazebo Concepts",id:"basic-gazebo-concepts",level:2},{value:"Worlds",id:"worlds",level:3},{value:"Models",id:"models",level:3},{value:"ROS 2 Integration",id:"ros-2-integration",level:2},{value:"Gazebo ROS Packages",id:"gazebo-ros-packages",level:3},{value:"Launching Gazebo with ROS 2",id:"launching-gazebo-with-ros-2",level:3},{value:"Controlling Robots in Gazebo",id:"controlling-robots-in-gazebo",level:2},{value:"Joint State Publisher",id:"joint-state-publisher",level:3},{value:"Robot Control",id:"robot-control",level:3},{value:"Creating a Simple Simulation",id:"creating-a-simple-simulation",level:2},{value:"1. Create a World File",id:"1-create-a-world-file",level:3},{value:"2. Launch the Simulation",id:"2-launch-the-simulation",level:3},{value:"Robot Simulation in Gazebo",id:"robot-simulation-in-gazebo",level:2},{value:"URDF Integration",id:"urdf-integration",level:3},{value:"Controllers Configuration",id:"controllers-configuration",level:3},{value:"Sensor Simulation",id:"sensor-simulation",level:2},{value:"Camera",id:"camera",level:3},{value:"LIDAR",id:"lidar",level:3},{value:"Debugging and Visualization",id:"debugging-and-visualization",level:2},{value:"Gazebo GUI",id:"gazebo-gui",level:3},{value:"Model States",id:"model-states",level:3},{value:"TF Tree",id:"tf-tree",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Exercise",id:"exercise",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"gazebo-simulation",children:"Gazebo Simulation"})}),"\n",(0,a.jsx)(n.p,{children:"Gazebo is the standard simulation environment for ROS and provides a powerful physics engine for realistic robot simulation. This section covers setting up Gazebo, creating simulation worlds, and integrating with ROS 2."}),"\n",(0,a.jsx)(n.h2,{id:"introduction-to-gazebo",children:"Introduction to Gazebo"}),"\n",(0,a.jsx)(n.p,{children:"Gazebo provides:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Realistic physics simulation using ODE, Bullet, or Simbody"}),"\n",(0,a.jsx)(n.li,{children:"High-quality 3D graphics rendering"}),"\n",(0,a.jsx)(n.li,{children:"Sensor simulation (cameras, LIDAR, IMU, etc.)"}),"\n",(0,a.jsx)(n.li,{children:"Multiple robot support"}),"\n",(0,a.jsx)(n.li,{children:"Plugin architecture for custom functionality"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,a.jsx)(n.p,{children:"If not already installed during ROS 2 setup:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"sudo apt install ros-humble-gazebo-ros-pkgs ros-humble-gazebo-ros2-control ros-humble-gazebo-dev\n"})}),"\n",(0,a.jsx)(n.h2,{id:"basic-gazebo-concepts",children:"Basic Gazebo Concepts"}),"\n",(0,a.jsx)(n.h3,{id:"worlds",children:"Worlds"}),"\n",(0,a.jsx)(n.p,{children:"Gazebo worlds define the environment where simulation takes place. They include:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Physics properties (gravity, air density)"}),"\n",(0,a.jsx)(n.li,{children:"Models (robots, objects, obstacles)"}),"\n",(0,a.jsx)(n.li,{children:"Lighting and visual properties"}),"\n",(0,a.jsx)(n.li,{children:"Plugins for additional functionality"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Example world file:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0" ?>\n<sdf version="1.7">\n  <world name="simple_world">\n    \x3c!-- Physics properties --\x3e\n    <physics type="ode">\n      <gravity>0 0 -9.8</gravity>\n    </physics>\n\n    \x3c!-- Lighting --\x3e\n    <light name="sun" type="directional">\n      <cast_shadows>true</cast_shadows>\n      <pose>0 0 10 0 0 0</pose>\n      <diffuse>0.8 0.8 0.8 1</diffuse>\n      <specular>0.2 0.2 0.2 1</specular>\n      <attenuation>\n        <range>1000</range>\n        <constant>0.9</constant>\n        <linear>0.01</linear>\n        <quadratic>0.001</quadratic>\n      </attenuation>\n    </light>\n\n    \x3c!-- Ground plane --\x3e\n    <include>\n      <uri>model://ground_plane</uri>\n    </include>\n\n    \x3c!-- Sky --\x3e\n    <include>\n      <uri>model://sun</uri>\n    </include>\n  </world>\n</sdf>\n'})}),"\n",(0,a.jsx)(n.h3,{id:"models",children:"Models"}),"\n",(0,a.jsx)(n.p,{children:"Models represent objects in the simulation. They include:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Visual properties (appearance)"}),"\n",(0,a.jsx)(n.li,{children:"Collision properties (physics interaction)"}),"\n",(0,a.jsx)(n.li,{children:"Inertial properties (mass, center of mass)"}),"\n",(0,a.jsx)(n.li,{children:"Joints (connections between parts)"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"ros-2-integration",children:"ROS 2 Integration"}),"\n",(0,a.jsx)(n.h3,{id:"gazebo-ros-packages",children:"Gazebo ROS Packages"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"gazebo_ros_pkgs"})," provide ROS 2 interfaces for Gazebo:"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"gazebo_ros"}),": Core ROS 2 interface"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"gazebo_plugins"}),": Various simulation plugins"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"gazebo_msgs"}),": ROS 2 messages for Gazebo"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"launching-gazebo-with-ros-2",children:"Launching Gazebo with ROS 2"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Launch empty world with ROS 2 interface\nros2 launch gazebo_ros empty_world.launch.py\n\n# Launch with a specific world file\nros2 launch gazebo_ros empty_world.launch.py world:=/path/to/world.sdf\n"})}),"\n",(0,a.jsx)(n.h2,{id:"controlling-robots-in-gazebo",children:"Controlling Robots in Gazebo"}),"\n",(0,a.jsx)(n.h3,{id:"joint-state-publisher",children:"Joint State Publisher"}),"\n",(0,a.jsx)(n.p,{children:"Gazebo publishes joint states that can be used with ROS 2:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# View joint states from simulated robot\nros2 topic echo /joint_states\n"})}),"\n",(0,a.jsx)(n.h3,{id:"robot-control",children:"Robot Control"}),"\n",(0,a.jsx)(n.p,{children:"Use ROS 2 controllers to command robot joints:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-xml",children:'\x3c!-- In your robot\'s URDF or SDF --\x3e\n<gazebo>\n  <plugin name="gazebo_ros_control" filename="libgazebo_ros_control.so">\n    <robotNamespace>/your_robot</robotNamespace>\n  </plugin>\n</gazebo>\n'})}),"\n",(0,a.jsx)(n.h2,{id:"creating-a-simple-simulation",children:"Creating a Simple Simulation"}),"\n",(0,a.jsx)(n.h3,{id:"1-create-a-world-file",children:"1. Create a World File"}),"\n",(0,a.jsxs)(n.p,{children:["Create ",(0,a.jsx)(n.code,{children:"simple_room.sdf"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0" ?>\n<sdf version="1.7">\n  <world name="simple_room">\n    <physics type="ode">\n      <gravity>0 0 -9.8</gravity>\n    </physics>\n\n    <light name="sun" type="directional">\n      <pose>0 0 10 0 0 0</pose>\n      <diffuse>0.8 0.8 0.8 1</diffuse>\n      <specular>0.2 0.2 0.2 1</specular>\n    </light>\n\n    <include>\n      <uri>model://ground_plane</uri>\n    </include>\n\n    <include>\n      <uri>model://sun</uri>\n    </include>\n\n    \x3c!-- Simple box obstacle --\x3e\n    <model name="box">\n      <pose>2 0 0.5 0 0 0</pose>\n      <link name="link">\n        <collision name="collision">\n          <geometry>\n            <box>\n              <size>1 1 1</size>\n            </box>\n          </geometry>\n        </collision>\n        <visual name="visual">\n          <geometry>\n            <box>\n              <size>1 1 1</size>\n            </box>\n          </geometry>\n          <material>\n            <ambient>0.5 0.5 0.5 1</ambient>\n            <diffuse>0.8 0.3 0.3 1</diffuse>\n          </material>\n        </visual>\n        <inertial>\n          <mass>1.0</mass>\n          <inertia>\n            <ixx>0.166667</ixx>\n            <ixy>0</ixy>\n            <ixz>0</ixz>\n            <iyy>0.166667</iyy>\n            <iyz>0</iyz>\n            <izz>0.166667</izz>\n          </inertia>\n        </inertial>\n      </link>\n    </model>\n  </world>\n</sdf>\n'})}),"\n",(0,a.jsx)(n.h3,{id:"2-launch-the-simulation",children:"2. Launch the Simulation"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"gz sim simple_room.sdf\n"})}),"\n",(0,a.jsx)(n.h2,{id:"robot-simulation-in-gazebo",children:"Robot Simulation in Gazebo"}),"\n",(0,a.jsx)(n.h3,{id:"urdf-integration",children:"URDF Integration"}),"\n",(0,a.jsx)(n.p,{children:"To use your URDF robot in Gazebo, add Gazebo-specific tags:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\n<robot name="humanoid_robot" xmlns:xacro="http://www.ros.org/wiki/xacro">\n  \x3c!-- Your URDF model --\x3e\n  <link name="base_link">\n    <visual>\n      <geometry>\n        <box size="0.3 0.2 0.5"/>\n      </geometry>\n    </visual>\n    <collision>\n      <geometry>\n        <box size="0.3 0.2 0.5"/>\n      </geometry>\n    </collision>\n    <inertial>\n      <mass value="5.0"/>\n      <inertia ixx="0.1" ixy="0.0" ixz="0.0" iyy="0.1" iyz="0.0" izz="0.1"/>\n    </inertial>\n  </link>\n\n  \x3c!-- Gazebo-specific tags --\x3e\n  <gazebo reference="base_link">\n    <material>Gazebo/Blue</material>\n    <mu1>0.2</mu1>\n    <mu2>0.2</mu2>\n  </gazebo>\n\n  \x3c!-- Controller plugin --\x3e\n  <gazebo>\n    <plugin filename="libgazebo_ros2_control.so" name="gazebo_ros2_control">\n      <parameters>$(find your_robot_description)/config/controllers.yaml</parameters>\n    </plugin>\n  </gazebo>\n</robot>\n'})}),"\n",(0,a.jsx)(n.h3,{id:"controllers-configuration",children:"Controllers Configuration"}),"\n",(0,a.jsxs)(n.p,{children:["Create ",(0,a.jsx)(n.code,{children:"controllers.yaml"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"controller_manager:\n  ros__parameters:\n    update_rate: 100  # Hz\n\n    joint_state_broadcaster:\n      type: joint_state_broadcaster/JointStateBroadcaster\n\n    velocity_controller:\n      type: velocity_controllers/JointGroupVelocityController\n\n    position_controller:\n      type: position_controllers/JointGroupPositionController\n"})}),"\n",(0,a.jsx)(n.h2,{id:"sensor-simulation",children:"Sensor Simulation"}),"\n",(0,a.jsx)(n.p,{children:"Gazebo can simulate various sensors:"}),"\n",(0,a.jsx)(n.h3,{id:"camera",children:"Camera"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-xml",children:'<gazebo reference="camera_link">\n  <sensor name="camera" type="camera">\n    <camera name="head">\n      <horizontal_fov>1.047</horizontal_fov>\n      <image>\n        <width>640</width>\n        <height>480</height>\n        <format>R8G8B8</format>\n      </image>\n      <clip>\n        <near>0.1</near>\n        <far>100</far>\n      </clip>\n    </camera>\n    <plugin name="camera_controller" filename="libgazebo_ros_camera.so">\n      <frame_name>camera_link</frame_name>\n      <topic_name>image_raw</topic_name>\n    </plugin>\n  </sensor>\n</gazebo>\n'})}),"\n",(0,a.jsx)(n.h3,{id:"lidar",children:"LIDAR"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-xml",children:'<gazebo reference="lidar_link">\n  <sensor name="lidar" type="ray">\n    <ray>\n      <scan>\n        <horizontal>\n          <samples>720</samples>\n          <resolution>1</resolution>\n          <min_angle>-1.570796</min_angle>\n          <max_angle>1.570796</max_angle>\n        </horizontal>\n      </scan>\n      <range>\n        <min>0.1</min>\n        <max>30.0</max>\n        <resolution>0.01</resolution>\n      </range>\n    </ray>\n    <plugin name="lidar_controller" filename="libgazebo_ros_ray_sensor.so">\n      <ros>\n        <namespace>laser</namespace>\n        <remapping>~/out:=scan</remapping>\n      </ros>\n      <output_type>sensor_msgs/LaserScan</output_type>\n    </plugin>\n  </sensor>\n</gazebo>\n'})}),"\n",(0,a.jsx)(n.h2,{id:"debugging-and-visualization",children:"Debugging and Visualization"}),"\n",(0,a.jsx)(n.h3,{id:"gazebo-gui",children:"Gazebo GUI"}),"\n",(0,a.jsx)(n.p,{children:"Launch with GUI for visualization:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"gz sim -g your_world.sdf\n"})}),"\n",(0,a.jsx)(n.h3,{id:"model-states",children:"Model States"}),"\n",(0,a.jsx)(n.p,{children:"Monitor model states:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"ros2 topic echo /model_states\n"})}),"\n",(0,a.jsx)(n.h3,{id:"tf-tree",children:"TF Tree"}),"\n",(0,a.jsx)(n.p,{children:"Visualize transforms:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"ros2 run tf2_tools view_frames\n"})}),"\n",(0,a.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Start with simple models and gradually add complexity"}),"\n",(0,a.jsx)(n.li,{children:"Use appropriate physics properties (mass, friction) for realistic behavior"}),"\n",(0,a.jsx)(n.li,{children:"Test controllers in simulation before deploying to real robots"}),"\n",(0,a.jsx)(n.li,{children:"Use collision checking to prevent interpenetration"}),"\n",(0,a.jsx)(n.li,{children:"Optimize update rates for performance vs. accuracy trade-offs"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"exercise",children:"Exercise"}),"\n",(0,a.jsx)(n.p,{children:"Create a simple simulation with your humanoid robot navigating around obstacles in Gazebo. Implement a basic controller that allows the robot to move forward, turn, and avoid obstacles using simulated sensors."})]})}function u(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>r});var o=i(6540);const a={},l=o.createContext(a);function s(e){const n=o.useContext(l);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),o.createElement(l.Provider,{value:n},e.children)}}}]);